"use strict";(self.webpackChunkgulp_2022=self.webpackChunkgulp_2022||[]).push([[707],{707:(t,e,s)=>{s.r(e),s.d(e,{initUniversity:()=>y});var o=s(761);class i{constructor(){this.$wrapper=document.querySelector(".universityPrograms"),this.$controls=this.$wrapper.querySelectorAll("[data-programs-controls]"),this.$items=this.$wrapper.querySelectorAll("[data-programs-items]"),this.mainItemSelector=".universityPrograms__item:not(.universityPrograms__item--subitem)",this.$mainItems=this.$wrapper.querySelectorAll(this.mainItemSelector),this.init()}init(){this.setupAccordion()}setupAccordion(){this.$wrapper.addEventListener("click",(t=>{const e=t.target.closest(".universityPrograms__item-head.main"),s=t.target.closest(".universityPrograms__item-head.sub");e&&this.toggleAccordionItem(e),s&&this.toggleSubAccordionItem(s)}))}toggleAccordionItem(t){const e=t.closest(".universityPrograms__item"),s=t.nextElementSibling;e.classList.toggle("opened"),s.style.maxHeight=e.classList.contains("opened")?s.scrollHeight+"px":0}toggleSubAccordionItem(t){const e=t,s=e.closest(this.mainItemSelector),o=e.nextElementSibling,i=s.querySelector(".universityPrograms__item-head.main").nextElementSibling;e.parentNode.classList.toggle("opened"),e.classList.toggle("opened"),o.style.maxHeight=e.classList.contains("opened")?o.scrollHeight+"px":0,e.classList.contains("opened")?setTimeout((()=>{i.style.maxHeight=i.scrollHeight+"px"}),300):i.style.maxHeight=i.scrollHeight+"px"}}var a=s(455),n=s(28),r=s(85);const l={labels:["Teaching ranking","Research ranking","Research ranking 2","Financial sustainability ranking"],datasets:[{data:[40,40,10,10],ids:["item-1","item-2","item-3","item-4"],backgroundColor:["rgb(43, 140, 217, 0.5)","rgba(72, 193, 192, 0.5)","rgba(151, 202, 98, 0.5)","rgba(255, 195, 108, 0.5)"],borderRadius:5,offset:4,hoverOffset:5,cutout:36,borderColor:"#F8F8F8",hoverBorderColor:"#F8F8F8"}]},c={onClick:(t,e)=>{if(e.length>0){const t=e[0],s=t.datasetIndex,o=t.index,i=l.datasets[s].ids[o];g.changeControlActive(i)}},animation:{duration:1e3},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#fff",cornerRadius:8,displayColors:!1,caretSize:6,titleColor:"#212B36",titleAlign:"center",titleMarginBottom:0,titleFont:{weight:"bold",family:"Inter",size:14,lineHeight:1.2},bodyAlign:"center",bodyFont:{weight:"bold",family:"Inter",size:15,lineHeight:1.8},padding:{left:12,right:12,top:10,bottom:10},callbacks:{labelColor:function(t){return{opacity:0}},labelTextColor:function(t){const e=t.dataIndex;return t.dataset.backgroundColor[e]},label:function(t){return t.formattedValue+"%"}}},datalabels:{formatter:(t,e)=>{let s=0;e.chart.data.datasets[0].data.map((t=>{s+=t}));const o=(100*t/s).toFixed(0);return o>20?o+"%":""},color:"#FDFDFD",font:{family:"Inter",weight:"bold",size:18}}}},d=t=>{const[e,s,o,i,a]=t.match(/(\d+), (\d+), (\d+), (\d+\.\d+)/);return{red:s,green:o,blue:i,opacity:a}};class h{constructor(t){if(this.options=t,this.$controls=document.querySelector(t.controlsSelector),this.$tabs=document.querySelector(t.tabsSelector),!this.$controls||!this.$tabs)throw new Error("Controls or tabs not found");this.listeners={},this.init(t.defaultTabId)}init(t){this.controlsListener(),this.changeControlActive(t,!0)}controlsListener(){this.$controls.addEventListener("click",(t=>{const e=`[${this.options.controlsItem}]:not(.${this.options.activeClass}):not(${this.options.controlsSelector})`,s=t.target.closest(e);s&&this.changeControlActive(s.getAttribute(this.options.controlsItem))}))}changeControlActive(t,e=!1){this.$controls.querySelectorAll(`[${this.options.controlsItem}]`).forEach((t=>t.classList.remove(this.options.activeClass))),this.$controls.querySelector(`[${this.options.controlsItem}="${t}"]`).classList.add(this.options.activeClass),this.changeTab(t,e),this.listeners.changeTab&&this.listeners.changeTab.forEach((e=>{e(t)}))}async changeTab(t,e){const s=[];if(e){this.$tabs.querySelectorAll(`[${this.options.tabItem}]`).forEach((t=>{t.classList.remove(this.options.activeClass),t.style.display="none"}));const e=this.$tabs.querySelector(`[${this.options.tabItem}="${t}"]`);e.style.display=this.options.defaultDisplay,e.classList.add(this.options.activeClass)}else{this.$tabs.querySelectorAll(`[${this.options.tabItem}]`).forEach((t=>{t.classList.remove(this.options.activeClass);const e=new Promise((e=>{setTimeout((()=>{t.style.display="none",e()}),300)}));s.push(e)})),await Promise.all(s);const e=this.$tabs.querySelector(`[${this.options.tabItem}="${t}"]`);e.style.display=this.options.defaultDisplay,setTimeout((()=>{e.classList.add(this.options.activeClass)}),50)}}on(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}}let g;var u=s(741),p=s(985),m=s(252);const y=()=>{if((0,a.L)("university-main-page")||(0,a.L)("university-extended-page")){!async function(){const t=new r.ZP(document.getElementById("university-chart"),{type:"doughnut",data:l,options:c,plugins:[n.Z]});g=new h({controlsSelector:'[data-chart-controls="wrapper"]',tabsSelector:"[data-chart-tabs]",controlsItem:"data-chart-controls",tabItem:"data-chart-tab",defaultTabId:"item-1",activeClass:"active",defaultDisplay:"block"});const e=document.querySelector("[data-chart-table-box]");g.on("changeTab",(s=>{e&&(e.querySelectorAll("[data-chart-table]").forEach((t=>{t.classList.remove("active")})),e.querySelector(`[data-chart-table=${s}]`).classList.add("active"));const o=l.datasets[0].ids.indexOf(s),i=(({red:t,green:e,blue:s,opacity:o})=>`rgba(${t}, ${e}, ${s}, ${o})`)({...d(l.datasets[0].backgroundColor[o]),opacity:1}),a={...l,datasets:[{...l.datasets[0],backgroundColor:l.datasets[0].backgroundColor.map(((t,e)=>e===o?i:t))}]};t.data=a,t.options.animation.duration=0,t.update()})),g.changeControlActive("item-1",!0)}();const t=document.querySelector('[data-university="rankings"]');(0,u.v)({$mainArray:t.querySelectorAll(".universityRankings__row:not(.universityRankings__row--head)"),dropdownSelector:".universityRankings__popover"})}(0,a.L)("university-extended-page")&&(m.KR.bind("[data-fancybox]",{}),o.Ny,o.QF,new i,new h({controlsSelector:'[data-programs-controls="wrapper"]',tabsSelector:"[data-programs-tabs]",controlsItem:"data-programs-controls",tabItem:"data-programs-tab",defaultTabId:"item-1",activeClass:"active",defaultDisplay:"block"})),(()=>{const t=document.querySelector("#universityLocation"),e=t.querySelectorAll('[data-location="item"]'),s=t.querySelector('[data-location="box"]');let o=0;e.length>=3&&(o=[...e].reduce(((t,e,s)=>s<3?t+=e.offsetHeight:t),0),s.style.height=o+"px"),t.addEventListener("click",(t=>{const e=t.target.closest('[data-location="button"]');if(e){t.preventDefault();const i=e.querySelector("span");s.classList.toggle("opened"),e.classList.toggle("opened");const a=s.cloneNode(!0);a.style.overflow="visible",a.style.height="auto",a.style.visibility="hidden",s.parentNode.appendChild(a);const n=a.getBoundingClientRect().height;a.parentNode.removeChild(a),s.classList.contains("opened")?(i.innerHTML="Hide",s.style.height=n+"px"):(i.innerHTML="Watch more",s.style.height=o+"px")}}))})(),new p.x}}}]);